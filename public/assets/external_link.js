!function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var e=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e)}var n,i,o;return n=e,o=[{key:"init",value:function(t){var e=this;if(this.placeholder={title:"",body:"You are now leaving a Pfizer-operated website. Links to all outside sites are provided as a resource to our visitors. Pfizer accepts no responsibility for the content of sites that are not owned and operated by Pfizer.",continue:"Go to link",cancel:"Cancel"},this.lang=document.querySelector("html").lang||"",this.whitelist=t.whitelist,this.primaryPopup=null,this.overridePopups=[],this.overridePopupsAny=[],Array.isArray(t.popups)){if(this.primaryPopup=t.popups.find((function(t){return"primary"===t.type&&t.language===e.lang})),this.primaryPopup||(this.primaryPopup=t.popups.find((function(t){return"primary"===t.type&&"any"===t.language}))),!this.primaryPopup)return;this.overridePopups=t.popups.filter((function(t){return"override"===t.type&&t.enabled&&t.language===e.lang})),this.overridePopupsAny=t.popups.filter((function(t){return"override"===t.type&&t.enabled&&"any"===t.language}))}this.helixContainer=document.querySelector("#helix-container"),this.helixContainer||(this.helixContainer=document.createElement("div"),this.helixContainer.id="helix-container",document.body.appendChild(this.helixContainer)),this.attach()}},{key:"attach",value:function(){var t=this,e=window.location.host.replace(/^((http[s]?|ftp):\/\/)?\/?([^\/\.]+\.)*?([^\/\.]+\.[^:\/\s\.]{2,3}(\.[^:\/\s\.]{2,3})?(:\d+)?)($|\/)([^#?\s]+)?(.*?)?(#[\w\-]+)?$/,"$4");if(this.primaryPopup.whitelist){for(var n=this.primaryPopup.whitelist.split("\n"),i=[],o=0;o<n.length;o++){var r=n[o].replace(/(\r\n|\n|\r)/gm,"");r&&(r=r.replace("*",".*"),i.push(new RegExp("^https?:\\/\\/".concat(r,".*$"),"i")))}this.primaryPopup.whitelistedDomains=i}this.overridePopups.map((function(t){for(var e=t.blacklist.split("\n"),n=[],i=0;i<e.length;i++){var o=e[i].replace(/(\r\n|\n|\r)/gm,"");o&&(o=o.replace("*",".*"),n.push(new RegExp("^https?:\\/\\/".concat(o,".*$"),"i")))}return t.blacklistedDomains=n,t})),this.overridePopupsAny.map((function(t){for(var e=t.blacklist.split("\n"),n=[],i=0;i<e.length;i++){var o=e[i].replace(/(\r\n|\n|\r)/gm,"");o&&(o=o.replace("*",".*"),n.push(new RegExp("^https?:\\/\\/".concat(o,".*$"),"i")))}return t.blacklistedDomains=n,t}));var a=new RegExp("^https?://([^@]*@)?".concat("([^/]*\\.)?").concat(e),"i");document.body.addEventListener("click",(function(e){var n=e.composedPath().find((function(t){return"A"===t.tagName}));if(n){var i=n.href;if(t.primaryPopup.whitelistedDomains&&Array.isArray(t.primaryPopup.whitelistedDomains)&&t.primaryPopup.whitelistedDomains.findIndex((function(t){return t.test(i)}))>-1)return;0!==i.indexOf("http")||a.test(i)||(e.preventDefault(),t.showModal(n.href))}}))}},{key:"showModal",value:function(t){var e=this,n=this.overridePopups.find((function(e){return e.blacklistedDomains.findIndex((function(e){return e.test(t)}))>-1}));n||(n=this.overridePopupsAny.find((function(e){return e.blacklistedDomains.findIndex((function(e){return e.test(t)}))>-1})));var i={title:this.primaryPopup.title?this.primaryPopup.title:this.placeholder.title,body:this.primaryPopup.body?this.primaryPopup.body:this.placeholder.body,continue:this.primaryPopup.continue?this.primaryPopup.continue:this.placeholder.continue,cancel:this.primaryPopup.cancel?this.primaryPopup.cancel:this.placeholder.cancel,style:this.primaryPopup.style};if(n&&(i.title=n.title?n.title:this.placeholder.title,i.body=n.body?n.body:this.placeholder.body,i.continue=n.continue?n.continue:this.placeholder.continue,i.cancel=n.cancel?n.cancel:this.placeholder.cancel,i.style=n.style?n.style:i.style),"helix"!==i.style){var o='<div class="modal" tabindex="-1" role="dialog">\n                        <div class="modal-dialog" role="document">\n                            <div class="modal-content">\n                                <div class="modal-header">\n                                    <h5 class="modal-title">'.concat(i.title,'</h5>\n                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                                        <span aria-hidden="true">&times;</span>\n                                    </button>\n                                </div>\n                                <div class="modal-body">\n                                    ').concat(i.body,'\n                                </div>\n                                <div class="modal-footer">\n                                    <button type="button" class="btn btn-primary">').concat(i.continue,'</button>\n                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">').concat(i.cancel,"</button>\n                                </div>\n                            </div>\n                        </div>\n                    </div>");this.container||(this.container=document.createElement("div"),this.container.id="external-link-modal",document.body.appendChild(this.container)),this.container.innerHTML=o,this.container.firstChild.style.display="block";var r=this;this.container.querySelector("button.btn-primary").addEventListener("click",(function(e){r.destroyModal(),window.open(t,"_blank")})),this.container.querySelector("button.btn-secondary").addEventListener("click",(function(t){r.destroyModal()})),this.container.querySelector("button.close").addEventListener("click",(function(t){r.destroyModal()}))}else{this.helixContainer.innerHTML='\n                <helix-ext-link id="helix-ext-popup" has-crest whitelist="/" has-brand-stripe cancel-text="'.concat(i.cancel,'" go-to-link-text="').concat(i.continue,'">\n                    <div slot="label">').concat(i.title,'</div>\n                    <div slot="message">').concat(i.body,"</div>\n                </helix-ext-link>\n            ");var a=document.querySelector("#helix-ext-popup");a.trigger&&"function"==typeof a.trigger&&a.trigger(t,"_blank");var l=setInterval((function(){a.shadowRoot.querySelectorAll("helix-button").forEach((function(t){clearInterval(l),t.addEventListener("click",(function(){e.helixContainer.innerHTML=""}))}))}));setTimeout((function(){clearInterval(l)}),1e4)}}},{key:"destroyModal",value:function(){document.body.removeChild(this.container),this.container=null}}],(i=null)&&t(n.prototype,i),o&&t(n,o),e}();window.externalLink=e}();